[gd_scene load_steps=13 format=3 uid="uid://ec6tppqjxxwt"]

[ext_resource type="Script" uid="uid://cvqh3d3x1aicv" path="res://Scripts/Classes/Entities/Enemies/StaticPiranhaPlant.gd" id="1_wftkx"]
[ext_resource type="Script" uid="uid://caq1qiwmy0mox" path="res://Scripts/Parts/BetterAnimatedSprite.gd" id="2_cljum"]
[ext_resource type="Script" uid="uid://cbal8ms2oe1ik" path="res://Scripts/Classes/Components/ResourceSetterNew.gd" id="3_cn5c6"]
[ext_resource type="JSON" path="res://Assets/Sprites/Enemies/FirePiranhaPlant.json" id="4_wftkx"]
[ext_resource type="Script" uid="uid://dw25p2gplfkx0" path="res://Scripts/Classes/Entities/Enemies/FirePiranha.gd" id="5_x6gyp"]
[ext_resource type="PackedScene" uid="uid://c32pui3x8p0hx" path="res://Scenes/Prefabs/Entities/Objects/PlantFireball.tscn" id="6_5rcfe"]
[ext_resource type="Script" uid="uid://ctfbuoxtnnl0q" path="res://Scripts/Classes/Components/EditorPropertyExposer.gd" id="7_3o4ss"]
[ext_resource type="Script" uid="uid://b8vmbtoaaq5nc" path="res://Scripts/Parts/EditorToggleDetection.gd" id="8_x6gyp"]
[ext_resource type="Script" uid="uid://bx6r8sjar6cwr" path="res://Scripts/Classes/Components/BasicStaticMovement.gd" id="9_5rcfe"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_x6gyp"]
size = Vector2(6, 13)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5rcfe"]
size = Vector2(10, 10)

[sub_resource type="GDScript" id="GDScript_bw2cb"]
script/source = "extends Node

func _process(_delta: float) -> void:
	const OFFSETS = [Vector2.ZERO, Vector2(0, -16), Vector2(-16, 0), Vector2(16, 0)]
	$\"../RotationJoint\".global_rotation_degrees = [0, 180, 90, -90][owner.pipe_direction]
	$\"../RotationJoint\".position = OFFSETS[owner.pipe_direction]
"

[node name="StaticFirePiranhaPlant" type="CharacterBody2D"]
collision_layer = 16
collision_mask = 2
script = ExtResource("1_wftkx")
metadata/_custom_type_script = "uid://bpydbpyjk1mt4"

[node name="RotationJoint" type="Node2D" parent="."]
unique_name_in_owner = true

[node name="Sprite" type="AnimatedSprite2D" parent="RotationJoint"]
unique_name_in_owner = true
position = Vector2(0, -16)
flip_h = true
script = ExtResource("2_cljum")
metadata/_custom_type_script = "uid://caq1qiwmy0mox"

[node name="Hitbox" type="Area2D" parent="RotationJoint/Sprite"]
position = Vector2(0, 12)

[node name="CollisionShape2D" type="CollisionShape2D" parent="RotationJoint/Sprite/Hitbox"]
position = Vector2(0, -6)
shape = SubResource("RectangleShape2D_x6gyp")

[node name="UpsideDownExtension" type="CollisionShape2D" parent="RotationJoint/Sprite/Hitbox"]
unique_name_in_owner = true
position = Vector2(0, -14)
shape = SubResource("RectangleShape2D_x6gyp")
debug_color = Color(0, 0.6, 0, 0.419608)

[node name="ResourceSetterNew" type="Node" parent="RotationJoint/Sprite" node_paths=PackedStringArray("node_to_affect")]
script = ExtResource("3_cn5c6")
node_to_affect = NodePath("..")
property_name = "sprite_frames"
resource_json = ExtResource("4_wftkx")
metadata/_custom_type_script = "uid://cbal8ms2oe1ik"

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="RotationJoint"]
position = Vector2(0, -5)
remote_path = NodePath("../../Collision")

[node name="Collision" type="CollisionShape2D" parent="."]
position = Vector2(0, -5)
shape = SubResource("RectangleShape2D_5rcfe")

[node name="FirePiranhaStuff" type="Node" parent="."]
process_mode = 1
script = ExtResource("5_x6gyp")
fireball_scene = ExtResource("6_5rcfe")

[node name="Node" type="Node" parent="."]
process_mode = 3
script = SubResource("GDScript_bw2cb")

[node name="EditorPropertyExposer" type="Node" parent="."]
script = ExtResource("7_3o4ss")
properties = Array[String](["pipe_direction", "gravity_enabled"])
metadata/_custom_type_script = "uid://ctfbuoxtnnl0q"

[node name="Timer" type="Timer" parent="."]
wait_time = 2.5

[node name="LevelEditorToggleDetection" type="Node" parent="."]
script = ExtResource("8_x6gyp")
metadata/_custom_type_script = "uid://b8vmbtoaaq5nc"

[node name="BasicStaticMovement" type="Node" parent="."]
script = ExtResource("9_5rcfe")
auto_call = false
metadata/_custom_type_script = "uid://bx6r8sjar6cwr"

[connection signal="ready" from="Timer" to="Timer" method="start"]
[connection signal="timeout" from="Timer" to="FirePiranhaStuff" method="shoot"]
[connection signal="level_start" from="LevelEditorToggleDetection" to="Timer" method="start"]
