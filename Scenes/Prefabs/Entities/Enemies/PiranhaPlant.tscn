[gd_scene load_steps=11 format=3 uid="uid://1rxw4k4wq3ni"]

[ext_resource type="PackedScene" uid="uid://bksfxqm6v1a4j" path="res://Scenes/Prefabs/Entities/Enemies/PipePlantBase.tscn" id="1_74mxh"]
[ext_resource type="PackedScene" uid="uid://cwqicj07wkd0n" path="res://Scenes/Parts/PiranhaPlantVisuals.tscn" id="2_nvpp7"]
[ext_resource type="Script" uid="uid://cpwloakvp672a" path="res://Scripts/Parts/EditorVisibleNode.gd" id="3_6owec"]
[ext_resource type="Texture2D" uid="uid://dbq6cn2hp6ijx" path="res://Assets/Sprites/Enemies/PiranhaPlant.png" id="4_rqj2q"]
[ext_resource type="Script" uid="uid://cbal8ms2oe1ik" path="res://Scripts/Classes/Components/ResourceSetterNew.gd" id="5_teh5w"]
[ext_resource type="JSON" path="res://Assets/Sprites/Enemies/PiranhaPlant.json" id="6_tmwyr"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_xojev"]

[sub_resource type="AtlasTexture" id="AtlasTexture_xp8sq"]
atlas = ExtResource("4_rqj2q")
region = Rect2(0, 24, 16, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_uohcg"]
atlas = ExtResource("4_rqj2q")
region = Rect2(16, 24, 16, 24)

[sub_resource type="SpriteFrames" id="SpriteFrames_xwv3o"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_xp8sq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uohcg")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[node name="PirannhaPlant" unique_id=877679531 node_paths=PackedStringArray("upside_down_hitbox") instance=ExtResource("1_74mxh")]
upside_down_hitbox = NodePath("RotationJoint/PositionJoint/Visuals/Hitbox/UpsideDownExtension")

[node name="Visuals" parent="RotationJoint/PositionJoint" parent_id_path=PackedInt32Array(531941041) index="0" unique_id=533885688 instance=ExtResource("2_nvpp7")]

[node name="SmokePoint" type="Node2D" parent="RotationJoint/PositionJoint" parent_id_path=PackedInt32Array(531941041) index="1" unique_id=270022033]
position = Vector2(0, -8)

[node name="LevelEditorVisibleNode" type="Node2D" parent="RotationJoint" parent_id_path=PackedInt32Array(1388609852) index="1" unique_id=1064434183]
visibility_layer = 2
script = ExtResource("3_6owec")
metadata/_custom_type_script = "uid://cpwloakvp672a"

[node name="Sprite" type="AnimatedSprite2D" parent="RotationJoint/LevelEditorVisibleNode" index="0" unique_id=280669304]
material = SubResource("ShaderMaterial_xojev")
position = Vector2(0, -12)
sprite_frames = SubResource("SpriteFrames_xwv3o")
autoplay = "default"
offset = Vector2(0, 1)

[node name="ResourceSetterNew" type="Node" parent="RotationJoint/LevelEditorVisibleNode/Sprite" index="0" unique_id=2135118533 node_paths=PackedStringArray("node_to_affect")]
script = ExtResource("5_teh5w")
node_to_affect = NodePath("..")
property_name = "sprite_frames"
resource_json = ExtResource("6_tmwyr")
metadata/_custom_type_script = "uid://cbal8ms2oe1ik"

[node name="GibSpawner" parent="." index="6" unique_id=1065734456 node_paths=PackedStringArray("visuals")]
visuals = NodePath("../RotationJoint/PositionJoint/SmokePoint")
gib_type = 1

[connection signal="killed" from="." to="." method="on_killed"]
[connection signal="hammer_player_hit" from="RotationJoint/PositionJoint/Visuals/Sprite/EnemyPlayerDetection" to="." method="die_from_hammer"]
[connection signal="invincible_player_hit" from="RotationJoint/PositionJoint/Visuals/Sprite/EnemyPlayerDetection" to="." method="die_from_object"]
[connection signal="invincible_player_hit" from="RotationJoint/PositionJoint/Visuals/Sprite/EnemyPlayerDetection" to="RotationJoint/PositionJoint/Visuals/Sprite/ScoreNoteSpawner" method="spawn_note" binds= [200]]
[connection signal="player_hit" from="RotationJoint/PositionJoint/Visuals/Sprite/EnemyPlayerDetection" to="." method="damage_player"]
[connection signal="player_stomped_on" from="RotationJoint/PositionJoint/Visuals/Sprite/EnemyPlayerDetection" to="." method="damage_player"]
[connection signal="fireball_hit" from="RotationJoint/PositionJoint/Visuals/Sprite/FireballDetection" to="." method="die_from_object"]
[connection signal="fireball_hit" from="RotationJoint/PositionJoint/Visuals/Sprite/FireballDetection" to="RotationJoint/PositionJoint/Visuals/Sprite/ScoreNoteSpawner" method="spawn_note" binds= [200]]
[connection signal="moving_shell_entered" from="RotationJoint/PositionJoint/Visuals/Sprite/ShellDetection" to="." method="die_from_object"]
[connection signal="explosion_entered" from="RotationJoint/PositionJoint/Visuals/Sprite/ExplosionDetection" to="." method="die_from_object"]
[connection signal="explosion_entered" from="RotationJoint/PositionJoint/Visuals/Sprite/ExplosionDetection" to="RotationJoint/PositionJoint/Visuals/Sprite/ScoreNoteSpawner" method="spawn_note" binds= [200]]

[editable path="RotationJoint/PositionJoint/Visuals"]
